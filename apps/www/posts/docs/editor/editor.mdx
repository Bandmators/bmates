---
title: Editor
order: 100
lastUpdatedDate: 2024-10-12
group: Editor
---

The `Editor` class extends the `@bmates/renderer/Stage` to provide audio editing functionalities.

The class is a powerful tool for audio editing.
This class manages various audio tracks and offers editing features through a user interface.

> related: [Node](/docs/renderer/stage)

## Properties

**name**: `string`

The name of the editor. The default value is `'BEditor'`.

**data**: `EditorDataType[]`

An array of data used by the editor.

**style**: `EditorStyleType`

Contains the style settings for the editor.

> For more information about data and style, check the [Configuration](/docs/configuration).

## Constructor

```typescript
constructor (
    element: HTMLCanvasElement,
    data: EditorDataType[],
    style: Partial<EditorStyleType> = {}
)
```

**element**: `HTMLCanvasElement`

The HTML canvas element where the editor will be rendered.

**data**: `EditorDataType[]`

The initial array of data.

**style**: `Partial<EditorStyleType>`
The initial style settings.

## Usage Example

```typescript
const canvas: HTMLCanvasElement = document.getElementById('editorCanvas');
const editorData: EditorDataType[] = [];
const editorStyle: Partial<EditorStyleType> = {};

const editor = new Editor(canvas, editorData, editorStyle);
editor.init();
editor.play();

// editor.destory ();
```

## Methods

### init ()

Performs initialization tasks, loading track buffers and initializing layout and events.

### destory ()

Safely destroys all editor events.

### play ()

Plays the current track.

### pause ()

Pauses the current track.

### stop ()

Stops the playback of the current track.

### isPlaying ()

Returns a boolean indicating whether the audioplayer is playing.

- Return: `boolean`

### select (nodes)

Selects the given Wave nodes.

| Name  | Type     | Description                   |
| ----- | -------- | ----------------------------- |
| nodes | `Wave[]` | Selects the given Wave nodes. |

### unselect ()

Deselects all selected nodes.

### addWave (song)

Adds a new song.

| Name | Type           | Description      |
| ---- | -------------- | ---------------- |
| song | `SongDataType` | Adds a new song. |

### duplicate ()

Duplicates the selected nodes.

### paste (nodes)

Pastes nodes from the clipboard.

| Name  | Type              | Description                      |
| ----- | ----------------- | -------------------------------- |
| nodes | `SongDataType[]?` | Pastes nodes from the clipboard. |

### mute (trackId, isMuted)

Adjusts the mute state of the target.
If the `isMuted` value is not provided, it toggles the current state.

| Name    | Type                        | Description                                                                                                      |
| ------- | --------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| trackId | `string`                    | The ID of the track to mute.                                                                                     |
| isMuted | `boolean` <br/> `undefined` | Adjusts the mute state of the target.<br/>If not provided, toggles the current state.<br/>Default is `undefined` |

### isMuted (trackId)

Returns the current mute state of the specified track.

| Name    | Type     | Description                            |
| ------- | -------- | -------------------------------------- |
| trackId | `string` | The ID of the track to get mute state. |

- Return: `boolean`

### getCurrentTime ()

Returns the current play time.

- Return: `number`

### export ()

Returns the current data of the editor.

- Return: `EditorDataType[]`

### exportTracks ()

Returns the audio tracks as a Blob. This method utilizes the audio player to convert the current audio tracks into a downloadable format.

- Return: `Promise<Blob>`

### async downloadBlob (filename)

Downloads the audio tracks as a Blob with the specified filename. This method calls the `exportTracks` function to get the Blob and then triggers the download.

| Name     | Type     | Description                       |
| -------- | -------- | --------------------------------- |
| filename | `string` | The name of the file to download. |

### saveState ()

Records the current status of the editor, allowing users to save their progress.
This method captures the state of all active tracks and settings, enabling users to restore their work later.

### undo ()

Reverts to the previous state.
This method allows users to undo the last action taken in the editor, restoring the state to what it was before the last change.

### redo ()

Reapplies the last undone action.
This method allows users to redo an action that was previously undone, restoring the state to the most recent change.
